# Protokoll 4

    Datum 10.12.2018
    Anwesend: Berger Emil, Böcksteiner Jakob, Bullner Jeremy, Ehmann Julian, Knappitsch Robert, Kobor Markus, Köhler Marcel
    Abwesend: Niemand

## DELETE-Befehl auf einem REST-Server

Um einen DELETE-Befehl über HTTP-Request ausführen zu können, muss man den Index/id, die der URL übergeben wird, des zum löschenden Wertes mittels Handler-Methode, welche im Konstruktor an den Server übergeben wird löschen.

Die Handler-Methode sieht wie folgt aus:

```javascript
private handleDeleteData(req: express.Request, res: express.Response) 
{
    try 
    {
        const id = +req.query.id;
        if (id >= 0 && id < Database.getInstance().size()) 
        {
            Database.getInstance().remove(id);
            res.status(200).end();
        }
        else 
        {
            throw new Error('invalid index ' + id);
        }
    } 
    catch (err) 
    {
        res.status(400).send('400 Bad Request');
    }
}
```
Um im Konstruktor wird folgendes übergeben:

```javascript
this._server.delete('/data',
    (req, res) => this.handleDeleteData(req, res));
 ```

In diesem Falle werden jedoch alle Elemente die nach dem gelöschten Wert kommen, im Index nachrutschen. Was bedeutet, dass kein Wert eine eindeutige ID hat.
Um diesen Problem auszuweichen, könnte man jedem Wert noch zusätzlich eine ID-Variable übergeben, oder noch sinnvoller ein [Object](https://javascript.info/object) welches ähnlich wie eine Hash Map jedem Wert automatisch auch eine ID zuweist.

## PUT-Befehl auf einem REST-Server

Mittels PUT-Befehl über einen HTTP-Request wird der zu speichernde Wert ans Ende der Wertereihe abgespeichert.
Dazu benötigt man folgende Handler-Methode:
```javascript

private handlePutDate (req: express.Request, res: express.Response) {
    try {
        const m = new Value(req.body.tem, req.body.power);
        try {
            Database.getInstance().add(m);
            res.send({id: Database.getInstance().size() - 1 });
        } catch {
            res.status(500).send('500 Server Error');
        }

    } catch (err) {
        res.status(400).send('400 Bad Request');
}
res.status(500).end();
```
Und übergibt diese wie folgt im Konstruktor:
```javascript
this._server.put('/data' ,
    (req, res) => this.handlePutDate(req, res)
);
