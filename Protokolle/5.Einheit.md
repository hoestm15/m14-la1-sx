# Protokoll 5

Datum: 23.01.2018
Abwesend: Niemand

## Thema: Modbus

### Definition

Das [Modbus-Protokoll](https://www.wachendorff-prozesstechnik.de/fileadmin/wp/fileserver/technical_notes/TN_0302_Grundlagen_Modbus.pdf) ist ein Feldbusprotokoll,  dass im Gegensatz zu z.B.: [Powerlink](https://de.wikipedia.org/wiki/Ethernet_Powerlink) oder [SERCOS-III](https://de.wikipedia.org/wiki/SERCOS_III) ein offenes Protokoll mit dem man Daten übertragen kann mittels:
* RTU(byteweise binär)
* ASCII(byteweise textuell)
* TCP/IP(in TCP-Paketen)

Es ist ein sogenanntes [Master-Slave](https://de.wikipedia.org/wiki/Master/Slave)-Protokoll. Dies bedeutet, dass die Slaves zwar Daten senden und empfangen können, aber der Master alles regelt. 
Weiters muss jeder Busteilnehmer eine eigene, eindeutig zuordbare Adresse besitzen, wobei die Adresse 0 dem Broadcast zugeordnet ist.
Zur Verbindung verschiedener Arten des Modbusprotokolls benötingt man einen Modbusgateway.

### Datenmodell

Das Modbus Datenmodell beinhaltet grundsätzlich 4 Adresstabellen
* Discretes Input: ein Bit, kann nur gelesen werden, zB.: aus einen I/O Register
* Coils: ein Bit, kann nur beschrieben werden, zB.: um eine LED anzusteuern
* Input Registers: 16 Bit, kann nur gelesen werden, zB.: Messwerte eines Sensors
* Holding Registers: 16 Bit, kann nur beschrieben werden, zB.: Drehzahl eines Motors

### Function-Code

Function Codes geben die Bedeutung eines Frames bekannt, und sind in 3 Varianten unterteilt:
* User defined Function Codes ((65-72, 100-110) können vom Benutzer selbst individuell verwendet werden)
* Reserved Function Codes ((8, 19,21-65535, 9, 10, 13, 14, 41, 42, 90, 91, 125, 126, 127) sind von Unternehmen für ihre Produkte reserviert)
* Public Function Codes ((die übrigbleibenden Werte) werden von der [Modbus-Community](http://www.modbus.org/) allgemein definiert)

### Java Native Interface

Das JNI ist eine Java-Bibliothek, in der plattform-, oder schnittstellenabhängige Methoden implementiert sind, wenn eine Verbindung mit den klassischen Java-Bibliotheken nicht möglich ist. Wie zB.: mit einem Gerät, dass man in einer anderen Sprache als Java programmieren muss.

 
