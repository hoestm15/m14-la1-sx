# *Protokoll:* Julian Ehmann  

## **5. Einheit: Modbus**  
 Name: Julian Ehmann  
 Klasse: 4AHME  
 Datum: 23.01.2018  
 Anwesend: Berger Emil, Bullner Jeremy, Böcksteiner Jakob, Ehmann Julian, Enzi Gert, Kobor Markus, Knappitsch Robert
 Abwesend: -
 
## Besprechung der neuen Aufgabenstellung: Temperatursensor
Aufgabenstellung: Es ist ein Java-Programm zu erstellen, welches die Werte eines analogen Temperatursensors,
der über das Sureboard ausgewertet wird, angezeigt. 
Zu Beginn der Übung müssen wir jedoch eine Methode zum Datenaustausch auswählen und festlegen.
Dazu wird ein Feldbusprotokoll benötigt welches festlegt, wie und wohin die Daten übertragen werden.
Aufgrund der leichten Verständlichkeit haben wir **Modbus** verwendet.



## Modbus
Grundsätzlich verwendet man das Modbus-Protokoll um zwischen SPS'en zu kommunizieren, mitlerweile wird es hauptsächlich in der Industrie
verwendet. Grund dafür ist, dass es kostenfrei verfügbar ist und RS-232, RS-485 und TCP/IP kompartible.
Über den Modbus können *Master* und einer oder mehrere *Slaves* miteinander kommunizieren.
In diesem Bus-System muss jeder Teilnehmer eine nicht verwechselbare Adresse haben. Hierbei ist allerdings zu beachten, dass die Adresse 0
bereits für den Broadcast vorbestimmt ist. Alle Bus-Systemteilnehmer können Daten austauschen, werden aber vom Master geregelt.

### Textuelles Bild zur Veranschaulichung
*Master*...versendet Request  
*Slave*....liefert Response  
Dieser simple Vorgang beschreibt den Modbus eigentlich ziemlich gut, 
da er nach dem Request/Response Prinzip funktioniert.

Hierbei gibt es 3 Varianten zum Datenaustausch:  
* Modbus TCP   (per TCP Paketen)  
* Modbus RTU   (binär)  
* Modbus ACSII (textuell)

Das Model mit dem die Kommunikation stattfindet laute *Server/Client* Prinzip. 
Beispiel: PC1 (*Client*) sendet eine Request an einen beliebigen PC2, Sensor oder Aktor (*Server*). 
Der PC1(Client) erhält vom PC2(Server) eine Response.


## Modbus Daten-Model

* Discrete Inputs  = Nur ein Bit, dass nur gelesen werden kann (z.B. Taster).    
* Coils            = Nur ein Bit, dass gelesen und beschrieben werden kann (z.B. LED).     
* Input Register   = 16 Bit Wert, der nur gelesen werden kann (z.B. Temperatursensor).    
* Holding Register = 16 Bit Wert, der gelesen und beschrieben werden kann.    

## Function-Codes

Der Function-Code definiert die Bedeutung eines Frames.   
Dies wird in drei Kategorien unterteilt:

* User defined Function Codes (65-72, 100-110)                    -> Werte dürfen individuell verwendet werden.    
* Reserved Function Codes (8,9,10,13,14,41,42,90,91,125,126,127)  -> Werte welche von Unternehmen für Produkte verwendet werden.    
* Public Function Codes(Alle Restlichen Werte)                    -> Werte welche von der Modbus.org community festgelegt werden.   

## **Modbus-Gateway**

Mithilfe eines Modbus-Gateway kann man verschiedene Modbus Varianten miteinander verbinden.   
In der PDU (Protocol Data Units) sind der Function code und und Dateien enthalten.    
In der ADU (Application Data Unit) sind Frame Felder enthalten welche für die Adressierung und die Fehlererkennung zuständig sind.

## Java

Einfach erklärt ist eine Klasse ein "Bauplan" für ein Programm. Ein Klasse besteht aus Attributen und Methoden.   
public abstract class -> Bei einer abstrakten Klasse werden Methoden und Namen geschrieben aber es gibt keinen Code dazu.   
Vererbungen -> Bei Java gibt es immer nur eine Einfachvererbung. Eine Elternklasse kann mehrere Kindklassen haben, aber eine Kindklasse kann nur eine Elternklasse haben.
